#!/usr/bin/env gosh
;; Configuring Gauche-rfc-stringprep
;; Run ./configure (or gosh ./configure) to generate Makefiles.

(use gauche.configure)
(load "configure-compat"
      :paths `(,(sys-dirname (current-load-path)))
      :error-if-not-found #f)

;; Here you can define handlers of configure arguments by cf-arg-enable
;; and cf-arg-with.  Note that --with-local is handled implicitly if you use
;; cf-init-gauche-extension.


;; Initialize configure.  This creates the global context, parses
;; command-line args and sets up default values.
(cf-init-gauche-extension)

;; Here you can add feature tests and other cf-define's.

(cf-check-headers '("stringprep.h"))

;; TODO Check the settings valid or not. not enough understand yet.

(unless (cf-package-ref 'libidn)
  (cf-check-lib "idn" "stringprep"
                :if-not-found
                (^l
                 (format (current-error-port) "Error: libidn is required.\n")
                 (exit 1))
                ))

;; Output
(cf-output-default)

;; Local variables:
;; mode: scheme
;; end:
